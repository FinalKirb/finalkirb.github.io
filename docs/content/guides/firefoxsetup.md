# Kirb's Optimal Firefox Setup

Sources
https://github.com/yokoffing/Betterfox
https://github.com/yokoffing/NextDNS-Config
https://github.com/yokoffing/filterlists

Warning: Following this setup will disable saving passwords and credit cards on the browser, to enable them, paste the override settings from the Betterfox documentation before copying over your "user.js" file
https://github.com/yokoffing/Betterfox/wiki/Common-Overrides

## Phase 1: Installing Firefox
- Download the Firefox Installer from Firefox.com

<img src="../../media/firefoxsetup/firefoxsetup_001.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Open the Firefox Installer executable and install firefox

<img src="../../media/firefoxsetup/firefoxsetup_002.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

<img src="../../media/firefoxsetup/firefoxsetup_003.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

<img src="../../media/firefoxsetup/firefoxsetup_004.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>


## Phase 2: Setting up Firefox
- Open Firefox and head to https://github.com/yokoffing/Betterfox

<img src="../../media/firefoxsetup/firefoxsetup_005.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Scroll down to "Getting started" and right-click "here"

<img src="../../media/firefoxsetup/firefoxsetup_006.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Select "Save Link As..." and save the "user.js" file on your computer

<img src="../../media/firefoxsetup/firefoxsetup_007.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

<img src="../../media/firefoxsetup/firefoxsetup_008.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- [OPTIONAL BUT RECOMMENDED, FOR SMOOTH SCROLLING]
	- Show in explorer, right-click the "user.js" file and click on "Edit"

	- <img src="../../media/firefoxsetup/firefoxsetup_009.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	- <img src="../../media/firefoxsetup/firefoxsetup_010.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	- When you get a security warning, click on "Open"

	- <img src="../../media/firefoxsetup/firefoxsetup_011.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	- Open "Smoothfox.js" at the top of the betterfox page

	- <img src="../../media/firefoxsetup/firefoxsetup_012.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	- Copy the option that fits best with your monitor's refresh rate
		- If you're unsure which one you should choose, use the "recommended for 60hz+ displays" option

		- <img src="../../media/firefoxsetup/firefoxsetup_013.png" width="50%" style="float: left; margin-right: 10px;">
		<div style="clear: both;"></div>

	- Paste it under "SECTION: SMOOTHFOX", for this example I'll use the "recommended for 90hz+ displays" as I have a high refresh-rate monitor

	- <img src="../../media/firefoxsetup/firefoxsetup_014.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	- <img src="../../media/firefoxsetup/firefoxsetup_015.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	- Save the "user.js" file
- Enter "about:profiles" in the address bar

<img src="../../media/firefoxsetup/firefoxsetup_016.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Click on "Create a New Profile"

<img src="../../media/firefoxsetup/firefoxsetup_017.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Click on "Next"

<img src="../../media/firefoxsetup/firefoxsetup_018.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Name your Firefox Profile and click on "Finish"

<img src="../../media/firefoxsetup/firefoxsetup_019.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Under "Profile: Kirb" click on "Open Folder" right next to "Root Directory"

<img src="../../media/firefoxsetup/firefoxsetup_020.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- This should open your new profile's folder, drag your "user.js" file in there

<img src="../../media/firefoxsetup/firefoxsetup_021.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

<img src="../../media/firefoxsetup/firefoxsetup_022.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>


- Open the hamburger menu (3 lines) on the top right
- Click on "Exit"

<img src="../../media/firefoxsetup/firefoxsetup_023.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Reopen Firefox

<img src="../../media/firefoxsetup/firefoxsetup_024.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Open a new tab

<img src="../../media/firefoxsetup/firefoxsetup_025.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- If you wish to have a visible toolbar for your bookmarks, right-click on the empty part of the toolbar and set "Bookmarks Toolbar" to "Always Show"

<img src="../../media/firefoxsetup/firefoxsetup_026.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Right-click on the "Getting Started" bookmark and delete it

<img src="../../media/firefoxsetup/firefoxsetup_027.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- If you wish to import bookmarks, browsing history, etc. from your previous browser, click on "Import bookmarks"

<img src="../../media/firefoxsetup/firefoxsetup_028.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Select the browser profile you want to import from

<img src="../../media/firefoxsetup/firefoxsetup_029.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Click on "Import" and "Done"

<img src="../../media/firefoxsetup/firefoxsetup_030.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

<img src="../../media/firefoxsetup/firefoxsetup_031.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>


## Phase 3: Configuring Firefox
- Open https://addons.mozilla.org/blog/ublock-origin-everything-you-need-to-know-about-the-ad-blocker
- Scroll down and click on "Add to Firefox" under "uBlock Origin"

<img src="../../media/firefoxsetup/firefoxsetup_033.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Click on "Add"

<img src="../../media/firefoxsetup/firefoxsetup_034.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Enable "Allow this extension to run in Private Windows" and click on Okay

<img src="../../media/firefoxsetup/firefoxsetup_035.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Click on the uBlock Origin Icon

<img src="../../media/firefoxsetup/firefoxsetup_036.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Open the dashboard with the gear icon

<img src="../../media/firefoxsetup/firefoxsetup_037.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Open the "Filter lists" tab

<img src="../../media/firefoxsetup/firefoxsetup_038.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

<img src="../../media/firefoxsetup/firefoxsetup_039.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Expand all of the categories and enable the following Filter lists:

<img src="../../media/firefoxsetup/firefoxsetup_040.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

	- Block Outsider Intrusion into LAN
	- Easylist - Annoyances
	- uBlock filters - Annoyances

	<img src="../../media/firefoxsetup/firefoxsetup_041.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

- Open https://github.com/yokoffing/filterlists and press "Subscribe" to the following filterlists:
	- Hagezi's Personal Blocklist
	- Actually Legitimate URL Shortener Tool
	- yokoffing's Annoyance list

	<img src="../../media/firefoxsetup/firefoxsetup_042.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	<img src="../../media/firefoxsetup/firefoxsetup_043.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	<img src="../../media/firefoxsetup/firefoxsetup_044.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	<img src="../../media/firefoxsetup/firefoxsetup_045.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	<img src="../../media/firefoxsetup/firefoxsetup_046.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	<img src="../../media/firefoxsetup/firefoxsetup_047.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

- Apply changes & Update now

<img src="../../media/firefoxsetup/firefoxsetup_048.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- You can now close the uBlock Origin Dashboard!

- For a privacy-friendly drop-in replacement of Google Search, I heavily recommend using Startpage as your search engine. You get the exact same search results, but preserve your online privacy.
	- You can follow the following steps with whatever Search Engine you prefer, it doesn't have to be Startpage!
- Open a new tab and open https://startpage.com

<img src="../../media/firefoxsetup/firefoxsetup_049.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Right-click the address bar and select "Add Startpage Search"

<img src="../../media/firefoxsetup/firefoxsetup_050.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Go to the firefox settings and under "Search" options:

<img src="../../media/firefoxsetup/firefoxsetup_051.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

<img src="../../media/firefoxsetup/firefoxsetup_052.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

	- Change your default Search Engine to Startpage (Or whatever you prefer) and enable "Use this search engine in Private Windows"

	<img src="../../media/firefoxsetup/firefoxsetup_053.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	<img src="../../media/firefoxsetup/firefoxsetup_054.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	- Scroll down and remove every listed search engine you don't need, in my setup I'm removing:
		- Google
		- Amazon.com
		- Bing
		- Wikipedia(en)

		<img src="../../media/firefoxsetup/firefoxsetup_055.png" width="50%" style="float: left; margin-right: 10px;">
		<div style="clear: both;"></div>

		<img src="../../media/firefoxsetup/firefoxsetup_056.png" width="50%" style="float: left; margin-right: 10px;">
		<div style="clear: both;"></div>

- Open a new tab and search for something with Startpage
- Open the Settings via the gear icon

<img src="../../media/firefoxsetup/firefoxsetup_057.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Change the following settings and then click on "Save your settings"
	- Region filter: For local results, choose your region inside startpage

	<img src="../../media/firefoxsetup/firefoxsetup_058.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	- Disable "Promotional messaging"

	<img src="../../media/firefoxsetup/firefoxsetup_059.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>
- Save your Startpage Settings

<img src="../../media/firefoxsetup/firefoxsetup_060.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Under "General" options you can choose how you'd like firefox to behave, these are mostly a matter of personal preference. Enable what is most convenient for you
	- Enable "Open previous windows and tabs" if you want your tabs to stay after closing firefox
	- Enable "Confirm before closing multiple tabs" if you want there to be a confirmation window before closing the browser with multiple tabs
	- When you enable "Enable Container Tabs", you can hold down on the "new tab" button to select and open a so-called "Container Tab"
		- Container Tabs let you seperate your browsing activites through different color-coded containers. These containers are isolated from each other, meaning that the logins from your "School" container are completely seperated from the rest of your browser. This lets you stay logged in to your personal Google account while browsing at home. Need to access your school's gmail? Just open gmail in your dedicated "School" container and log in without any crossover, as if it was a new browser.


		<img src="../../media/firefoxsetup/firefoxsetup_061.png" width="50%" style="float: left; margin-right: 10px;">
		<div style="clear: both;"></div>

## Phase 4: NextDNS
- Open https://nextdns.io
- Click on "Try it now"

<img src="../../media/firefoxsetup/firefoxsetup_062.png" width="50%" style="float: left; margin-right: 10px;">
<div style="clear: both;"></div>

- Open the "Security" tab and change the following settings:
	- Enable "DNS Rebinding Protection"
	- Enable "Block Parked Domains"

	<img src="../../media/firefoxsetup/firefoxsetup_063.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	<img src="../../media/firefoxsetup/firefoxsetup_064.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	<img src="../../media/firefoxsetup/firefoxsetup_065.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

- Open the "Privacy" tab and do the following:
	- Remove "NextDNS Ads & Trackers Blocklist"

	<img src="../../media/firefoxsetup/firefoxsetup_066.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	<img src="../../media/firefoxsetup/firefoxsetup_067.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	<img src="../../media/firefoxsetup/firefoxsetup_068.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	- Under "Blocklists", click on "Add a Blocklist"
		- Press CTRL+F on your keyboard and search for "Hagezi - Multi Normal"

		<img src="../../media/firefoxsetup/firefoxsetup_069.png" width="50%" style="float: left; margin-right: 10px;">
		<div style="clear: both;"></div>

		- Click on "Add"
			- Unless you know what you're doing, DON'T RANDOMLY ADD BLOCKLISTS. They may no longer be updated, may contain duplicate links or false positives.

			<img src="../../media/firefoxsetup/firefoxsetup_070.png" width="50%" style="float: left; margin-right: 10px;">
			<div style="clear: both;"></div>

	- Under "Native Tracking Protection", click on "Add"
		- Add all of the brands you use. There's no advantage in adding brands you don't have, but there's also no disadvantage in adding unused brands either

		<img src="../../media/firefoxsetup/firefoxsetup_071.png" width="50%" style="float: left; margin-right: 10px;">
		<div style="clear: both;"></div>

		<img src="../../media/firefoxsetup/firefoxsetup_072.png" width="50%" style="float: left; margin-right: 10px;">
		<div style="clear: both;"></div>


	- Enable "Allow Affiliate & Tracking links"
		- Leaving this disabled could cause some false positives when opening email links, your IP Address will be hidden

		<img src="../../media/firefoxsetup/firefoxsetup_073.png" width="50%" style="float: left; margin-right: 10px;">
		<div style="clear: both;"></div>
- Open the "Settings" tab
	- Disable "Enable Logs"
		- If you want to have Logs of your DNS Queries, make sure to set the Storage Location to Switzerland and configure the Retention time

		<img src="../../media/firefoxsetup/firefoxsetup_074.png" width="50%" style="float: left; margin-right: 10px;">
		<div style="clear: both;"></div>

	- Enable "Cache Boost"

	<img src="../../media/firefoxsetup/firefoxsetup_076.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

	- [Optional] Enable Web3

	<img src="../../media/firefoxsetup/firefoxsetup_077.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

- Go back to the "Setup" tab

	<img src="../../media/firefoxsetup/firefoxsetup_078.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

- Copy the link next to "DNS-over-HTTPS" (https://dns.nextdns.io/------)

	<img src="../../media/firefoxsetup/firefoxsetup_079.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

- Open your Firefox Settings

	<img src="../../media/firefoxsetup/firefoxsetup_080.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

- Go to "Privacy & Security"
- Scroll all the way down to "DNS over HTTPS"
- Click on either "Increased Protection" or "Max Protection"

	<img src="../../media/firefoxsetup/firefoxsetup_081.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

- Select "Custom", paste your NextDNS link and press Enter, under your Provider you should now see dns.nextdns.io

	<img src="../../media/firefoxsetup/firefoxsetup_082.png" width="50%" style="float: left; margin-right: 10px;">
	<div style="clear: both;"></div>

Congratulations! You now have an optimal firefox setup that doesn't spy on you, performs like a charm and protects your privacy by blocking online ads and trackers.
